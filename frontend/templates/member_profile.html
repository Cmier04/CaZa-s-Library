{% extends 'base.html' %}
{% block title %}Member Profile - CaZaâ€™s Library{% endblock %}

{% block content %}
<div class="container">
  <h1>Member Profile</h1>

  <!-- Member Info -->
  <div class="section">
    <h2>Member Information</h2>
    <div class="profile-info">
      <p><strong>Name:</strong> {{ name }}</p>
      <p><strong>Email:</strong> {{ email }}</p>
      <p><strong>Member ID:</strong> {{ member_id }}</p>
    </div>
  </div>

  <!-- Edit Info -->
  <div class="section">
    <h2>Edit Your Info</h2>
    <form method="POST" action="{{ url_for('frontend.member_profile') }}">
      <label for="edit_name">Username</label>
      <input type="text" id="edit_name" placeholder="Enter new name" name="edit_name">

      <label for="edit-email">Email</label>
      <input type="email" id="edit_email" placeholder="Enter new email" name="edit_email"/>

      <button type="submit">Update Info</button>
    </form>
  </div>

  <!-- Checked Out Books -->
  <div class="section">
    <h2>Books Checked Out</h2>
    {% if checked_out_books %}
    <ul>
      {% for book in checked_out_books %}
        <li>
          <strong>{{ book.title }}</strong> by {{ book.author }}<br>
          ISBN: {{book.isbn }}<br>
          Due Date: {{ book.due_date }}<br>
          Status: 
          {% if book.get('overdue_status') == 'overdue' %}
            <span style="color:red;">Overdue</span>
          {% else %}
            <span style="color:green;">On Time</span>
          {% endif %}
          
          <form method="POST">
            <input type="hidden" name="action" value="return_book">
            <input type="hidden" name="isbn" value="{{ book.isbn }}">
            <input type="hidden" name="title" value="{{ book.title }}">
            <input type="hidden" name="author" value="{{ book.author }}">
            <button type="submit">Return Book</button>
          </form>
        </li>
      {% endfor %}
    </ul>
    {% else %}
      <p>No books currently checked out.</p>
    {% endif %}
  </div>
</div>
{% endblock %}

